---
layout: default
---

<!-- Page Header -->
{% if page.background %}
<header class="masthead" style="background-image: url('{{ page.background | prepend: site.baseurl | replace: '//', '/' }}')">
  {% else %}
  <header class="masthead">
    {% endif %}
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>{{ page.title }}</h1>
            {% if page.subtitle %}
            <h2 class="subheading">{{ page.subtitle }}</h2>
            {% endif %}
            <span class="meta">Posted by
              <a href="#">{% if page.author %}{{ page.author }}{% else %}{{ site.author }}{% endif %}</a>
              on {{ page.date | date: '%B %d, %Y' }} &middot; {% include read_time.html
              content=page.content %}
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        {{ content }}

        <hr>

        <!-- Related Posts Section -->
        <h3>Related Thoughts</h3>
        <ul class="list-unstyled">
          {% assign post_tags = page.tags %}
          {% assign related_posts = site.posts | where_exp: "post", "post.url != page.url" %}

          {% assign filtered_posts = "" | split: "," %}
          {% for post in related_posts %}
            {% for tag in post.tags %}
              {% if post_tags contains tag %}
                {% assign filtered_posts = filtered_posts | push: post %}
                {% break %}  <!-- Stop checking once a matching tag is found -->
              {% endif %}
            {% endfor %}
          {% endfor %}

          {% assign sorted_filtered_posts = filtered_posts | sort: "date" | reverse %}
          {% assign recent_related_posts = sorted_filtered_posts | slice: 0, 3 %}

          {% for related in recent_related_posts %}
            <li class="d-flex justify-content-between">
              <a href="{{ related.url | relative_url }}">{{ related.title }}</a>
              <span class="text-muted">{{ related.date | date: "%B %d, %Y" }}</span>
            </li>
          {% endfor %}

          {% if recent_related_posts.size == 0 %}
            <p>No related thoughts found.</p>
          {% endif %}
        </ul>



      </div>
    </div>
  </div>
